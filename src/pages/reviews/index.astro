---
import { Icon } from 'astro-icon/components';
import Starts from '../../components/Starts';
import LayoutSec from '../../layouts/LayoutSec.astro';
---

<LayoutSec>
  <img
    src="/images/share-dark.svg"
    alt="Compartir"
    class="absolute top-6 right-6 w-6 h-6 cursor-pointer share-btn"
  />
  <section class="w-full flex flex-col justify-center items-center h-full">
    <div
      class="w-full flex flex-col justify-center items-center gap-4 min-h-[70vh] px-6 py-5"
    >
      <div class="w-full flex flex-col justify-center items-center gap-5">
        <a href="/">
          <img
            src="/images/logo-2.svg"
            alt="Logo del Footer de Arcos Remodeling"
            width="120"
            height="29"
            class="w-70 h-auto"
          />
        </a>
        <div class="flex flex-col justify-center items-center">
          <p
            class="text-[16px] leading-5 max-w-[320px] text-center text-primary-dark font-medium"
          >
            We hope you loved the experience with <br /> Quality Portable Service. <br
            />
            <br />Your feedback means the world to us.
          </p>
        </div>
      </div>
      <hr class="w-[24.5px] h-0.75 bg-primary" />
      <div
        class="w-full flex flex-col justify-center items-center gap-4 relative min-h-[120px] overflow-hidden"
      >
        <div
          class="w-[350px] h-full overflow-hidden absolute bg-accent rounded-[20px]"
        >
        </div>
        <div
          class="flex flex-col justify-center items-center z-10 py-4 rounded-[15px] overflow-hidden"
        >
          <p
            class="text-[14px] font-medium text-center text-white leading-[15px] w-[256px] mb-2"
          >
            Please tap the option that best reflects the quality of our service.
          </p>
          <Starts client:idle />
        </div>
      </div>
    </div>

    <section
      class="flex flex-col justify-center items-center gap-3 w-full pt-8 lg:pt-35[140px] bottom-3 relative"
    >
      <div class="flex justify-center items-center gap-3">
        <a
          href=""
          class="p-2 rounded-full flex items-center justify-center bg-primary shrink-0"
        >
          <Icon name={'tiktok'} class={'w-4  text-white'} />
        </a>
        <a
          href=""
          class="p-2 rounded-full flex items-center justify-center bg-primary shrink-0"
        >
          <Icon name={'facebook-2'} class={'w-4  text-white'} />
        </a>
        <a
          href=""
          class="p-2 rounded-full flex items-center justify-center bg-primary shrink-0"
        >
          <Icon name={'instagram-2'} class={'w-4 h-4  text-white'} />
        </a>
      </div>
      <div class="flex flex-col justify-center items-center gap-2.25">
        <p class="text-[12px] font-normal leading-[140%] text-[#878787]">
          Powered by
        </p>
        <a href="https://inkshapegroup.com/en/">
          <img
            src="/images/footer-logo.webp"
            alt="Imagen del Footer"
            width="3745"
            height="996"
            class="w-27.5 h-7.25 cursor-pointer"
          />
        </a>
      </div>
    </section>
  </section>
</LayoutSec>
<script is:inline>
  const shareButtons = document.querySelectorAll('.share-btn');
  if (shareButtons && shareButtons.length) {
    shareButtons.forEach((btn) => {
      btn.addEventListener('click', async (e) => {
        e.stopPropagation();
        const shareData = {
          title: 'Arcos Remodeling',
          text: 'Arcos Remodeling - We would love to hear your feedback!',
          url: window.location.href,
        };

        if (navigator.share) {
          try {
            await navigator.share(shareData);
            return;
          } catch (err) {
            // user cancelled or error; fall through to clipboard fallback
            console.warn('share failed or cancelled', err);
          }
        }

        // Fallback: copy URL to clipboard and notify user
        try {
          await navigator.clipboard.writeText(window.location.href);
          // small user feedback; prefer a non-blocking toast in the future
          alert(
            'Enlace copiado al portapapeles. Pega y comparte donde quieras.'
          );
        } catch (err) {
          // last resort: open native share via mailto as a helper
          console.warn('clipboard write failed', err);
        }
      });
    });
  }
</script>
