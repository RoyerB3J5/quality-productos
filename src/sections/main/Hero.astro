---
import Button from '../../components/Button.astro';

type Translations = typeof import('../../i18n/en').default;
type HeroContent = Translations['main']['hero'];
interface Props {
  content: HeroContent;
}
const { content } = Astro.props as Props;
---

<section class="w-full flex items-center justify-center relative overflow-hidden">
  <img
    src={`/images/${content.image}.webp`}
    alt="Fondo de soluciones"
    width="2500"
    height="1563"
    class="absolute inset-0 w-auto md:w-full h-full object-cover -z-20 md:object-center hidden md:block"
    loading="eager"
    decoding="async"
    id="hero-bg"
  />
  {/*
    
  <img
    src={`/images/${content.image}-sm.webp`}
    alt="Fondo de soluciones"
    width="375"
    height="900"
    class="absolute inset-0 w-full h-full object-cover -z-20 md:hidden block object-center"
    loading="eager"
    decoding="async"
  />
  */}
  
  <div
    class="w-full max-w-screen md:max-w-7xl flex flex-row justify-start items-end sm:items-center md:items-start gap-4 md:gap-10 px-5 xl:px-0 h-dvh md:h-[90vh] lg:h-screen 3xl:h-[95vh] pt-0 md:pt-[7%] lg:pt-[5%] pb-16 md:pb-0"
    data-aos="fade-up"
    data-aos-duration="2000"
  >
    <div
      class="flex flex-col items-start justify-center w-full max-w-none lg:max-w-[50%] gap-8 md:gap-3 3xl:gap-10 md:translate-y-10"
    >
      <h1
        class="text-primary text-[36px] md:text-[64px] font-extrabold leading-[122%] md:leading-[114%] uppercase"
        set:html={content.title}
      >
      </h1>
      <p class="text-paragraph text-[14px] md:text-[16px] font-normal leading-[143%] md:leading-[150%] max-w-100.25" set:html={content.description}></p>
      <div class="flex justify-between md:justify-start items-center gap-4 w-full md:w-auto">
        {
          content.buttons.map((item)=>( 
            <Button
              text={item.label}
              textClass={item.text}
              href={item.href}
              target="_blank"
              extraBtnClass={item.back}
              iconName={item.icon}
            />
          ))
        }
      </div>
    </div>
  </div>
</section>

<script is:inline>
  // Efecto Parallax para la sección Hero
  document.addEventListener('DOMContentLoaded', () => {
    const heroBg = document.getElementById('hero-bg');
    const heroSection = heroBg?.closest('section');
    
    if (!heroBg || !heroSection) return;

    window.addEventListener('scroll', () => {
      const scrolled = window.pageYOffset;
      const heroRect = heroSection.getBoundingClientRect();
      
      // Solo aplicar parallax mientras la sección es visible
      if (heroRect.bottom > 0) {
        // El parallax se calcula restando el scroll, multiplicado por 0.5 para que sea más lento
        const parallaxValue = scrolled * 0.5;
        heroBg.style.transform = `translateY(${parallaxValue}px)`;
      }
    });
  });
</script>
