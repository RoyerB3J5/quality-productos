---
import Button from '../../components/Button.astro';

type Translations = typeof import('../../i18n/en').default;
type HeroContent = Translations['main']['hero'];
interface Props {
  content: HeroContent;
}
const { content } = Astro.props as Props;

// Detectar si estamos en la p치gina de industries
const isIndustriesPage = Astro.url.pathname.includes('/industries');
const objectPosition = isIndustriesPage ? 'md:object-center' : 'md:object-bottom';
---

<section class="w-full flex items-center justify-center relative overflow-hidden">
  <img
    src={`/images/${content.image}.webp`}
    alt={content.title}
    width="2500"
    height="1563"
    class={`absolute inset-0 w-full h-full object-cover -z-20 object-[68%_50%] sm:object-center ${objectPosition} 3xl:object-[50%_60%] translate-y-[-20%] sm:translate-y-0 img-hero `}
    loading="eager"
    decoding="async"
    id="hero-bg"
  />
  <div class="absolute h-full w-full -z-15 bg-[linear-gradient(180deg,rgba(0,0,0,0.00)_49.08%,#000_80.39%)] sm:bg-none"></div>
  
  <div
    class="w-full max-w-screen md:max-w-7xl flex flex-row justify-start items-end sm:items-center md:items-start gap-4 md:gap-10 px-5 xl:px-0 h-dvh md:h-[90vh] lg:h-screen 3xl:h-[95vh] pt-0 md:pt-[7%] lg:pt-[5%] pb-10 md:pb-0 hero-content"
  >
    <div
      class="flex flex-col items-start justify-center w-full max-w-none lg:max-w-[60%] gap-8 md:gap-4 md:translate-y-10"
    >
      <h1
        class="text-white sm:text-primary dark:text-paragraph-dark dark:sm:text-secondary-dark text-[36px] md:text-[64px] font-extrabold leading-[122%] md:leading-[114%]"
        set:html={content.title}
      >
      </h1>
      <p class="text-white sm:text-paragraph text-[14px] md:text-[16px] font-normal leading-[143%] md:leading-[150%] max-w-100.25" set:html={content.description}></p>
      <div class="flex justify-between md:justify-start items-center gap-4 w-full md:w-auto">
        {
          content.buttons.map((item)=>( 
            <Button
              text={item.label}
              textClass={item.text}
              href={item.href}
              extraBtnClass={item.back}
              iconName={item.icon}
            />
          ))
        }
      </div>
    </div>
  </div>
</section>

<script is:inline>
  // Efecto Parallax para la secci칩n Hero
  document.addEventListener('DOMContentLoaded', () => {
    const heroBg = document.getElementById('hero-bg');
    const heroSection = heroBg?.closest('section');
    
    if (!heroBg || !heroSection) return;

    window.addEventListener('scroll', () => {
      const scrolled = window.pageYOffset;
      const heroRect = heroSection.getBoundingClientRect();
      
      // Solo aplicar parallax mientras la secci칩n es visible
      if (heroRect.bottom > 0) {
        // El parallax se calcula restando el scroll, multiplicado por 0.5 para que sea m치s lento
        const parallaxValue = scrolled * 0.5;
        heroBg.style.transform = `translateY(${parallaxValue}px)`;
      }
    });
  });
</script>
